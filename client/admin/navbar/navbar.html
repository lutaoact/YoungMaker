<div ng-controller="NavbarCtrl" class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" ng-click="isCollapsed = !isCollapsed" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/admin" class="navbar-brand">mauidmin</a>
    </div>
    <div id="navbar-main" collapse="isCollapsed" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li ng-repeat="item in menu"
            ng-class="{active: isActive(item.link)}">
          <a class="text-center" ui-sref="{{item.link}}" ng-bind-html="item.title"></a>
        </li>
      </ul>
      <ul class="nav navbar-nav pull-right">
        <li  ng-if="!isLoggedIn()">
          <button type="button" class="login-btn btn btn-xs btn-danger btn-outline navbar-btn" login-window>登录</button>
        </li>
        <li ng-if="isLoggedIn()"
            dropdown
            class="profile-dropdown">
          <span dropdown-toggle>
             <span class="avatar-sm navbar-avatar dropdown-toggle" ng-src="{{me.avatar|trusted:'url'}}">
             </span>
             <span>{{me.name}}</span>
          </span>
          <ul class="dropdown-menu profile-menu" role="menu">
            <li><a ui-sref="user.home({userId:me._id})">
              我的主页</a></li>
            <li><a ui-sref="user.settings">
              个人设置</a></li>
            <li><a href="/" data-no-turbolink="true">
              我的收藏</a></li>
            <li><a href="/">
            通知中心</a></li>
            <li>
              <a href ng-click="logout()"
                 class="dropdown_login_out_link"
                 data-method="delete"
                 rel="nofollow">
                注销登录
              </a>
            </li>
          </ul>
            <span class="badge"
                  ng-show="getMsgCount()">
              {{getMsgCount()||'0'}}
            </span>
        </li>
        <li>
          <div class="btn-group" dropdown>
            <button type="button" class="btn btn-default dropdown-toggle navbar-btn">
              errors({{errors.length}}) <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" style="right:0;left:auto;min-width:600px" role="menu">
              <li ng-show="errors.length">
                <a ng-click="clearErrors()" href="">
                  remove all
                </a>
              </li>
              <li class="error clearfix alert alert-warning" ng-repeat="error in errors">
                <button type="button" class="close" ng-click="removeError(error)"><i class="fa fa-times"></i></button>
                <div class="pull-left">{{error.status}}</div>
                <div class="pull-left">{{error.statusText}}</div>
                <div class="pull-left">{{error.data}}</div>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
