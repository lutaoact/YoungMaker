<div class="article-tile">
  <div ng-if="article.image" ng-src="{{article.image}}" class="article-image pull-right"></div>
  <h4 class="article-title">
    <a href=""
       ng-hide="article.group"
       ui-sref="articleDetail({articleId: article._id})">
      {{article.title}}
    </a>
    <a href=""
       ng-show="article.group"
       ui-sref="groupArticleDetail({groupId: article.group, articleId: article._id})">
      {{article.title}}
    </a>
  </h4>
  <p class="article-summary text-muted">
    {{article.title||htmlToPlaintext}}
  </p>
  <hr>
  <div class="article-info">
    <span>
      <a href="" ui-sref="user({userId: article.author._id})">
        {{article.author.name}}
      </a>
    </span>
    <span class="text-muted" ng-if="article.group">发布于</span>
    <span ng-if="article.group">
      {{article.group.title}}&#183;
    </span>
    <span ng-if="article.column">
      专栏－{{article.column.name}}&#183;
    </span>
    <span class="text-muted">
     {{article.created | moment: 'fromNow'}}
    </span>
    <span class="text-muted">|</span>
    <span class="text-muted">
      <i class="fa fa-star"></i>
      {{article.likeUsers.length||0}}
    </span>
    <span class="text-muted">|</span>
    <span class="text-muted">
      <i class="fa fa-comment"></i>
      {{article.commentsNum||0}}
    </span>
  </div>

  <div class="vote-area">
    <i class="fa fa-heart toggle"
       login-window
       login-success="toggleVote()"
       ng-class="{'active':article.likeUsers.indexOf(me._id)>=0}"
       ng-click="stopPropagation($event)"></i>
    <div>
      {{article.likeUsers.length||0}}
    </div>
  </div>

  <a class="share-btn btn btn-primary btn-sm">
    <i class="budon budon-send"></i>
    {{article.shareNum||0}}
  </a>
  <div dropdown
       class="actions-dropdown"
       ng-if="me._id==article.author._id">
    <a class="dropdown-toggle btn btn-md" dropdown-toggle>
      <i class="fa fa-angle-down"></i>
    </a>
    <ul class="dropdown-menu" role="menu">
      <li>
        <a href=""
           ng-hide="article.group"
           ui-sref="articleEditor({articleId:article._id})">编辑</a>
        <a href=""
           ng-show="article.group"
           ui-sref="groupArticleEditor({groupId: article.group, articleId: article._id})">编辑</a>
      </li>
      <li>
        <a href=""
        ng-click="removeArticle(article)">删除</a>
      </li>
    </ul>
  </div>

</div>
