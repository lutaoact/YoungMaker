<div class="course-editor">
  <div class="container">

    <form name="form" ng-submit="submitCourse(form)" novalidate>
      <div class="panel panel-defualt">
        <div class="panel-body">
          <div class="form-group col-md-10 col-md-offset-1">
            <input type="text" name="title" required title-placeholder="课程名称" ng-model="course.title" class="form-control">
            <p class="help-block text-danger" ng-show="form.title.$error.required && submitted">
              请输入课程名称
            </p>
          </div>
          <!-- todo: category -->
          <!-- <div class="form-group">
            <select ng-model="course.category" class="form-control" ng-options="category.name for category in categories"></select>
          </div> -->
        </div>
      </div>
      <div class="panel panel-defualt">
        <div class="panel-heading">
          <div class="assets"></div>
          <div class="tool-bar" fix-when-reach-top offset="290">
            <div class="pull-left tools">
              <a class="btn btn-xs btn-default tool-btn">步骤</a>
              <span dropdown style="position: relative">
                <a href="" class="btn btn-xs btn-default" >
                  <span ng-click="addStep(viewState.lastPlugin)">{{viewState.lastPlugin.text}}</span>
                  <i class="fa fa-chevron-down" dropdown-toggle></i>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li ng-repeat="plugin in plugins">
                    <a href="" ng-click="addStep(plugin)">
                      {{plugin.text}}
                    </a>
                  </li>
                </ul>
              </span>
            </div>
            <div class="pull-right actions">
              <a class="btn btn-xs btn-default tool-btn" ng-click="viewState.showPreview=true">预览</a>
              <button class="btn btn-xs btn-default tool-btn" type="submit">保存</button>
              <a class="btn btn-xs btn-default tool-btn">发布</a>
            </div>
          </div>
        </div>
        <div class="panel-body">
          <div class="col-md-10 col-md-offset-1 editor clearfix" ng-repeat="step in course.steps">
            <div ng-switch="step.type">
              <div ng-switch-when="wysiwyg">
                <div class="assets">
                </div>
                <div class="form-group">
                  <input type="text" required title-placeholder="请输入标题" class="form-control" ng-model="step.title">
                </div>
                <div class="form-group">
                  <div disable-animation text-angular ng-model="step.content" placeholder="请输入内容"></div>
                </div>
              </div>
              <div ng-switch-when="md">
                <div class="assets">
                </div>
                <div class="form-group">
                  <input type="text" required title-placeholder="请输入标题" class="form-control" ng-model="step.title">
                </div>
                <div class="form-group">
                  <textarea name="" id="" cols="30" rows="10" class="form-control" ng-model="step.content" placeholder="请输入markdown格式的内容"></textarea>
                </div>
              </div>
              <div ng-switch-when="embed">
                <div class="assets">
                </div>
                <div class="form-group">
                  <input type="text" required title-placeholder="请输入标题" class="form-control" ng-model="step.title">
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" title-placeholder="插入网页链接或者iframe代码" ng-model="step.content">
                </div>
              </div>
              <div ng-switch-default>
                <div class="assets">
                </div>
                <div class="form-group">
                  <input type="text" required title-placeholder="请输入标题" class="form-control" ng-model="step.title">
                </div>
                <div class="form-group">
                  <div disable-animation text-angular ng-model="step.content" placeholder="请输入内容"></div>
                </div>
              </div>
            </div>
            <hr>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div id="bottom"></div>
  <div class="preview-wrap" ng-show="viewState.showPreview" ng-click="viewState.showPreview=false">
    <div class="preview" >
      <h1>{{course.title}}</h1>
      <h2 ng-repeat-start="step in course.steps">
        {{step.title}}
      </h2>
      <div ng-switch="step.type">
        <p ng-switch-when="wysiwyg" ng-bind-html="step.content"></p>
        <div ng-switch-when="embed" compile-html="step.content|embed"></div>
        <div ng-switch-when="md" ng-bind-html="step.content|showdown"></div>
        <p ng-switch-default ng-bind-html="step.content"></p>
      </div>
      <hr ng-repeat-end>
    </div>
  </div>
</div>
